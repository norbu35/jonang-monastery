---
import type { Quote } from "../../payload-types.ts";

const response = await fetch(`${import.meta.env.CMS_API_URL}/quotes`);
const data = await response.json();
const quotes: Quote[] = data.docs;
const quote: Quote = quotes[Math.floor(Math.random() * data.totalDocs)];
---

<figure
  class="mx-auto max-w-md px-4 py-14 md:max-w-3xl md:px-10 md:pb-28 md:pt-36 md:text-xl lg:px-32 xl:max-w-4xl"
>
  <blockquote
    class="flex flex-col items-center justify-center gap-6 md:flex-row lg:gap-8 xl:gap-24"
  >
    {
      quote?.originalQuoteHtml ? (
        <div
          set:html={quote?.originalQuoteHtml}
          lang={quote.originalQuoteLang}
          class="font-tibetan text-lg md:text-xl"
        />
      ) : null
    }
    <div set:html={quote?.quoteHtml} class="font-garamond" />
  </blockquote>
  <figcaption class="mt-6 text-right font-garamond text-lg md:mt-16 md:text-xl">
    <cite>{quote?.source}</cite>
  </figcaption>
</figure>
